闭包

> 什么是闭包   闭包的用途

#闭包
##1.概念
**闭包：**是指有权访问另一个函数作用域中的变量的 **函数**，只有函数内部的子函数才能读取局部变量， 因此可以把闭包简单理解成  “ 定义在一个函数内部的函数 ”。 所以，在本质上，闭包就是将函数内部和函数外部连接起来的一座桥梁。

##2.案例
	function fn(num2){
		var num = 15;	
		function abc(){
			num++;		
			console.log(num+num2);
		}		
		return abc;		
	}
	var aa = fn(20);
	aa();// 36   15+ 1 + 20
	aa();// 37   16+ 1 +20
	aa();// 38   17+1+20

	fn(20)(); //36
	fn(20)(); //36
	
	闭包作用：可以引用外部函数的变量或者参数  使该变量或者参数常驻内存 避免被垃圾回收机制所回收

	function f1() {
      var num = 10;
      num++;
      return num;
    }
    console.log(f1()); //11
    console.log(f1()); //11
    console.log(f1()); //11


	function f2() {
      var num = 10;
      return function () {
        num++;
        return num;
      }
    }
    var ff = f2();
    console.log(ff());//11
    console.log(ff());//12
    console.log(ff());//13

#作用域与作用域链
- **作用域：**变量可以起作用的范围

	- 全局作用域：全局变量对应的作用域
	
		- 全局变量：在任何地方都可以访问到的变量，全局变量关闭网页或浏览器才会销毁(生命周期)
	- 局部作用域（函数作用域）：函数内部就是一个局部作用域
	
		- 局部变量：只在固定的代码片段内可访问到的变量，变量退出作用域之后会销毁
	- 块级作用域（es5）：任何一对花括号（｛和｝）中的语句集都属于一个块，在这之中定义的所有变量在代码块外都是不可见的，我们称之为块级作用域
	
	- 词法作用域：变量的作用域是在定义时决定而不是执行时决定，也就是说词法作用域取决于源码，通过静态分析就能确定，因此词法作用域也叫做静态作用域
	
		**在 js 中词法作用域规则:**

		- 函数允许访问函数外的数据.
		- 整个代码结构中只有函数可以限定作用域
		- 作用域规则首先使用提升规则分析
		- 如果当前作用规则中有名字了, 就不考虑外面的名字
			

- **作用域链：**

		只有函数可以制造作用域结构， 那么只要是代码，就至少有一个作用域, 即全局作用域。凡是代码中有函数，那么这个函数就构成另一个作用域。如果函数中还有函数，那么在这个作用域中就又可以诞生一个作用域。

		将这样的所有的作用域列出来，可以有一个结构: 函数内指向函数外的链式结构。就称作作用域链。

### 基础数据类型与引用数据类型
- 基础数据类型（5种）
	- 值类型、简单数据类型 存储在栈中，存储的是值本身

- 复杂数据类型（1种）
	- 址类型、引用数据类型 存储在堆中，存储的是地址

闭包的用途：

- 可以在函数外部读取函数内部成员
- 让函数内成员始终存活在内存中


闭包：就业班\JS高级\面向对象\面向对象date05--函数进阶

作用域链：就业班\JS基础\ECMAScript\date04  